{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"reset-password-page\"\n};\nconst _hoisted_2 = {\n  class: \"form-container\"\n};\nconst _hoisted_3 = {\n  class: \"input-container\"\n};\nconst _hoisted_4 = {\n  class: \"input-container\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"error\"\n};\nconst _hoisted_6 = {\n  key: 1,\n  class: \"success\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[4] || (_cache[4] = _createElementVNode(\"h1\", null, \"Change Your Password\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.handleResetPassword && $options.handleResetPassword(...args), [\"prevent\"]))\n  }, [_createCommentVNode(\" New Password Field \"), _createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.newPassword = $event),\n    placeholder: \"New Password\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.newPassword]])]), _createCommentVNode(\" Confirm Password Field \"), _createElementVNode(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.confirmPassword = $event),\n    placeholder: \"Confirm Password\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.confirmPassword]])]), _createCommentVNode(\" Error Message \"), $data.errorMessage ? (_openBlock(), _createElementBlock(\"p\", _hoisted_5, _toDisplayString($data.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Success Message \"), $data.successMessage ? (_openBlock(), _createElementBlock(\"p\", _hoisted_6, _toDisplayString($data.successMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Change Password Button \"), _cache[3] || (_cache[3] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"Change Password\", -1 /* HOISTED */))], 32 /* NEED_HYDRATION */)])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onSubmit","_cache","_withModifiers","args","$options","handleResetPassword","_createCommentVNode","_hoisted_3","type","$event","$data","newPassword","placeholder","required","_hoisted_4","confirmPassword","errorMessage","_hoisted_5","_toDisplayString","successMessage","_hoisted_6"],"sources":["D:\\cafe-beata-Inventory-Preorder-main\\cafe-beata-main\\src\\components\\ChangePassword.vue"],"sourcesContent":["<template>\n  <div class=\"reset-password-page\">\n    <div class=\"form-container\">\n      <h1>Change Your Password</h1>\n\n      <form @submit.prevent=\"handleResetPassword\">\n        <!-- New Password Field -->\n        <div class=\"input-container\">\n          <input \n            type=\"password\" \n            v-model=\"newPassword\" \n            placeholder=\"New Password\" \n            required \n          />\n        </div>\n\n        <!-- Confirm Password Field -->\n        <div class=\"input-container\">\n          <input \n            type=\"password\" \n            v-model=\"confirmPassword\" \n            placeholder=\"Confirm Password\" \n            required \n          />\n        </div>\n\n        <!-- Error Message -->\n        <p v-if=\"errorMessage\" class=\"error\">{{ errorMessage }}</p>\n\n        <!-- Success Message -->\n        <p v-if=\"successMessage\" class=\"success\">{{ successMessage }}</p>\n\n        <!-- Change Password Button -->\n        <button type=\"submit\">Change Password</button>\n      </form>\n    </div>\n  </div>\n</template>\n\n\n<script>\nexport default {\n  data() {\n    return {\n      newPassword: \"\",\n      confirmPassword: \"\",\n      errorMessage: \"\",\n      successMessage: \"\",\n      token: this.$route.params.token, // Extract the token from the URL\n    };\n  },\n  methods: {\n    async handleResetPassword() {\n      const token = this.token;  // Extract token from the URL\n\n      if (!token) {\n        this.errorMessage = \"Invalid or missing token.\";\n        return;\n      }\n\n      if (this.newPassword !== this.confirmPassword) {\n        this.errorMessage = \"Passwords do not match.\";\n        return;\n      }\n\n      try {\n        const response = await fetch(`http://127.0.0.1:8000/reset-password/${token}`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            newPassword: this.newPassword,  // Only send the new password\n          }),\n        });\n\n        const data = await response.json();\n\n        if (response.ok) {\n          this.successMessage = data.message;\n          this.errorMessage = \"\";\n        } else {\n          this.errorMessage = data.detail || \"An error occurred. Please try again.\";\n          this.successMessage = \"\";\n        }\n      } catch (error) {\n        console.error(\"Error during password reset:\", error);\n        this.errorMessage = \"An unexpected error occurred.\";\n        this.successMessage = \"\";\n      }\n    }\n  },\n};\n</script>\n\n\n<style scoped>\n/* Styling for Reset Password Page */\n.success {\n  color: green;\n  font-size: 14px;\n  margin-top: 10px;\n}\n\n.reset-password-page {\n  background-image: url(\"@/assets/Uicbackroundblur.png\");\n  background-size: cover;\n  background-position: center;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n}\n\n.form-container {\n  background: rgba(255, 255, 255, 0.95);\n  padding: 30px;\n  border-radius: 15px;\n  box-shadow: 0 0 20px rgba(255, 105, 180, 0.8);\n  width: 85%;\n  max-width: 400px;\n  text-align: center;\n  backdrop-filter: blur(10px);\n}\n\nh1 {\n  font-size: 26px;\n  color: #d63384;\n  margin-bottom: 20px;\n  font-weight: bold;\n}\n\n.input-container {\n  margin-bottom: 20px;\n}\n\ninput {\n  width: 85%;\n  padding: 12px;\n  font-size: 16px;\n  border: 2px solid #ff69b4;\n  border-radius: 8px;\n  box-shadow: 0 0 10px rgba(255, 105, 180, 0.5);\n}\n\nbutton {\n  background-color: #ff69b4;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 8px;\n  cursor: pointer;\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAqB;;EACzBA,KAAK,EAAC;AAAgB;;EAKlBA,KAAK,EAAC;AAAiB;;EAUvBA,KAAK,EAAC;AAAiB;;EAjBpCC,GAAA;EA2B+BD,KAAK,EAAC;;;EA3BrCC,GAAA;EA8BiCD,KAAK,EAAC;;;uBA7BrCE,mBAAA,CAmCM,OAnCNC,UAmCM,GAlCJC,mBAAA,CAiCM,OAjCNC,UAiCM,G,0BAhCJD,mBAAA,CAA6B,YAAzB,sBAAoB,sBAExBA,mBAAA,CA6BO;IA7BAE,QAAM,EAAAC,MAAA,QAAAA,MAAA,MALnBC,cAAA,KAAAC,IAAA,KAK6BC,QAAA,CAAAC,mBAAA,IAAAD,QAAA,CAAAC,mBAAA,IAAAF,IAAA,CAAmB;MACxCG,mBAAA,wBAA2B,EAC3BR,mBAAA,CAOM,OAPNS,UAOM,G,gBANJT,mBAAA,CAKE;IAJAU,IAAI,EAAC,UAAU;IAT3B,uBAAAP,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAUqBC,KAAA,CAAAC,WAAW,GAAAF,MAAA;IACpBG,WAAW,EAAC,cAAc;IAC1BC,QAAQ,EAAR;iDAFSH,KAAA,CAAAC,WAAW,E,KAMxBL,mBAAA,4BAA+B,EAC/BR,mBAAA,CAOM,OAPNgB,UAOM,G,gBANJhB,mBAAA,CAKE;IAJAU,IAAI,EAAC,UAAU;IAnB3B,uBAAAP,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAoBqBC,KAAA,CAAAK,eAAe,GAAAN,MAAA;IACxBG,WAAW,EAAC,kBAAkB;IAC9BC,QAAQ,EAAR;iDAFSH,KAAA,CAAAK,eAAe,E,KAM5BT,mBAAA,mBAAsB,EACbI,KAAA,CAAAM,YAAY,I,cAArBpB,mBAAA,CAA2D,KAA3DqB,UAA2D,EAAAC,gBAAA,CAAnBR,KAAA,CAAAM,YAAY,oBA3B5DV,mBAAA,gBA6BQA,mBAAA,qBAAwB,EACfI,KAAA,CAAAS,cAAc,I,cAAvBvB,mBAAA,CAAiE,KAAjEwB,UAAiE,EAAAF,gBAAA,CAArBR,KAAA,CAAAS,cAAc,oBA9BlEb,mBAAA,gBAgCQA,mBAAA,4BAA+B,E,0BAC/BR,mBAAA,CAA8C;IAAtCU,IAAI,EAAC;EAAQ,GAAC,iBAAe,qB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}