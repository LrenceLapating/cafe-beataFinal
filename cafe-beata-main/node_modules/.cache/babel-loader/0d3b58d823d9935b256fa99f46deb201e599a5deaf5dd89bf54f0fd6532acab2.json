{"ast":null,"code":"export default {\n  data() {\n    return {\n      newPassword: \"\",\n      confirmPassword: \"\",\n      errorMessage: \"\",\n      successMessage: \"\",\n      token: this.$route.params.token // Extract the token from the URL\n    };\n  },\n  methods: {\n    async handleResetPassword() {\n      const token = this.token; // Extract token from the URL\n\n      if (!token) {\n        this.errorMessage = \"Invalid or missing token.\";\n        return;\n      }\n      if (this.newPassword !== this.confirmPassword) {\n        this.errorMessage = \"Passwords do not match.\";\n        return;\n      }\n      try {\n        const response = await fetch(`http://127.0.0.1:8000/reset-password/${token}`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            newPassword: this.newPassword // Only send the new password\n          })\n        });\n        const data = await response.json();\n        if (response.ok) {\n          this.successMessage = data.message;\n          this.errorMessage = \"\";\n        } else {\n          this.errorMessage = data.detail || \"An error occurred. Please try again.\";\n          this.successMessage = \"\";\n        }\n      } catch (error) {\n        console.error(\"Error during password reset:\", error);\n        this.errorMessage = \"An unexpected error occurred.\";\n        this.successMessage = \"\";\n      }\n    }\n  }\n};","map":{"version":3,"names":["data","newPassword","confirmPassword","errorMessage","successMessage","token","$route","params","methods","handleResetPassword","response","fetch","method","headers","body","JSON","stringify","json","ok","message","detail","error","console"],"sources":["D:\\cafe-beata-Inventory-Preorder-main\\cafe-beata-main\\src\\components\\ChangePassword.vue"],"sourcesContent":["<template>\n  <div class=\"reset-password-page\">\n    <div class=\"form-container\">\n      <h1>Change Your Password</h1>\n\n      <form @submit.prevent=\"handleResetPassword\">\n        <!-- New Password Field -->\n        <div class=\"input-container\">\n          <input \n            type=\"password\" \n            v-model=\"newPassword\" \n            placeholder=\"New Password\" \n            required \n          />\n        </div>\n\n        <!-- Confirm Password Field -->\n        <div class=\"input-container\">\n          <input \n            type=\"password\" \n            v-model=\"confirmPassword\" \n            placeholder=\"Confirm Password\" \n            required \n          />\n        </div>\n\n        <!-- Error Message -->\n        <p v-if=\"errorMessage\" class=\"error\">{{ errorMessage }}</p>\n\n        <!-- Success Message -->\n        <p v-if=\"successMessage\" class=\"success\">{{ successMessage }}</p>\n\n        <!-- Change Password Button -->\n        <button type=\"submit\">Change Password</button>\n      </form>\n    </div>\n  </div>\n</template>\n\n\n<script>\nexport default {\n  data() {\n    return {\n      newPassword: \"\",\n      confirmPassword: \"\",\n      errorMessage: \"\",\n      successMessage: \"\",\n      token: this.$route.params.token, // Extract the token from the URL\n    };\n  },\n  methods: {\n    async handleResetPassword() {\n      const token = this.token;  // Extract token from the URL\n\n      if (!token) {\n        this.errorMessage = \"Invalid or missing token.\";\n        return;\n      }\n\n      if (this.newPassword !== this.confirmPassword) {\n        this.errorMessage = \"Passwords do not match.\";\n        return;\n      }\n\n      try {\n        const response = await fetch(`http://127.0.0.1:8000/reset-password/${token}`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            newPassword: this.newPassword,  // Only send the new password\n          }),\n        });\n\n        const data = await response.json();\n\n        if (response.ok) {\n          this.successMessage = data.message;\n          this.errorMessage = \"\";\n        } else {\n          this.errorMessage = data.detail || \"An error occurred. Please try again.\";\n          this.successMessage = \"\";\n        }\n      } catch (error) {\n        console.error(\"Error during password reset:\", error);\n        this.errorMessage = \"An unexpected error occurred.\";\n        this.successMessage = \"\";\n      }\n    }\n  },\n};\n</script>\n\n\n<style scoped>\n/* Styling for Reset Password Page */\n.success {\n  color: green;\n  font-size: 14px;\n  margin-top: 10px;\n}\n\n.reset-password-page {\n  background-image: url(\"@/assets/Uicbackroundblur.png\");\n  background-size: cover;\n  background-position: center;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n}\n\n.form-container {\n  background: rgba(255, 255, 255, 0.95);\n  padding: 30px;\n  border-radius: 15px;\n  box-shadow: 0 0 20px rgba(255, 105, 180, 0.8);\n  width: 85%;\n  max-width: 400px;\n  text-align: center;\n  backdrop-filter: blur(10px);\n}\n\nh1 {\n  font-size: 26px;\n  color: #d63384;\n  margin-bottom: 20px;\n  font-weight: bold;\n}\n\n.input-container {\n  margin-bottom: 20px;\n}\n\ninput {\n  width: 85%;\n  padding: 12px;\n  font-size: 16px;\n  border: 2px solid #ff69b4;\n  border-radius: 8px;\n  box-shadow: 0 0 10px rgba(255, 105, 180, 0.5);\n}\n\nbutton {\n  background-color: #ff69b4;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 8px;\n  cursor: pointer;\n}\n</style>\n"],"mappings":"AAyCA,eAAe;EACbA,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE,EAAE;MACfC,eAAe,EAAE,EAAE;MACnBC,YAAY,EAAE,EAAE;MAChBC,cAAc,EAAE,EAAE;MAClBC,KAAK,EAAE,IAAI,CAACC,MAAM,CAACC,MAAM,CAACF,KAAK,CAAE;IACnC,CAAC;EACH,CAAC;EACDG,OAAO,EAAE;IACP,MAAMC,mBAAmBA,CAAA,EAAG;MAC1B,MAAMJ,KAAI,GAAI,IAAI,CAACA,KAAK,EAAG;;MAE3B,IAAI,CAACA,KAAK,EAAE;QACV,IAAI,CAACF,YAAW,GAAI,2BAA2B;QAC/C;MACF;MAEA,IAAI,IAAI,CAACF,WAAU,KAAM,IAAI,CAACC,eAAe,EAAE;QAC7C,IAAI,CAACC,YAAW,GAAI,yBAAyB;QAC7C;MACF;MAEA,IAAI;QACF,MAAMO,QAAO,GAAI,MAAMC,KAAK,CAAC,wCAAwCN,KAAK,EAAE,EAAE;UAC5EO,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YACnBf,WAAW,EAAE,IAAI,CAACA,WAAW,CAAG;UAClC,CAAC;QACH,CAAC,CAAC;QAEF,MAAMD,IAAG,GAAI,MAAMU,QAAQ,CAACO,IAAI,CAAC,CAAC;QAElC,IAAIP,QAAQ,CAACQ,EAAE,EAAE;UACf,IAAI,CAACd,cAAa,GAAIJ,IAAI,CAACmB,OAAO;UAClC,IAAI,CAAChB,YAAW,GAAI,EAAE;QACxB,OAAO;UACL,IAAI,CAACA,YAAW,GAAIH,IAAI,CAACoB,MAAK,IAAK,sCAAsC;UACzE,IAAI,CAAChB,cAAa,GAAI,EAAE;QAC1B;MACF,EAAE,OAAOiB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;QACpD,IAAI,CAAClB,YAAW,GAAI,+BAA+B;QACnD,IAAI,CAACC,cAAa,GAAI,EAAE;MAC1B;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}